@use '@angular/material' as mat;
@use '../m3-theme' as m3;

.matrix-theme {
  // Matrix 配色
  --matrix-green: #00ff41;
  --matrix-dark: #000000;
  --matrix-darker: #0a0a0a;

  background: #000000;
  color: var(--matrix-green);

  // Matrix 雨效果
  &::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
      repeating-linear-gradient(
        0deg,
        transparent,
        transparent 2px,
        rgba(0,255,65,0.03) 2px,
        rgba(0,255,65,0.03) 4px
      );
    pointer-events: none;
    z-index: -1;
    animation: matrix-rain 10s linear infinite;
  }

  @keyframes matrix-rain {
    0% { transform: translateY(0); }
    100% { transform: translateY(40px); }
  }

  .toolbar {
    background: rgba(0,0,0,0.9);
    border-bottom: 1px solid var(--matrix-green);
    box-shadow: 0 2px 10px rgba(0,255,65,0.3);

    &__title {
      font-family: 'Courier New', monospace;
      color: var(--matrix-green);
      text-shadow: 0 0 5px var(--matrix-green);
    }
  }

  .toolbar__filter {
    background: rgba(0,255,65,0.05);
    border: 1px solid var(--matrix-green);
    color: var(--matrix-green);
    font-family: 'Courier New', monospace;

    input {
      color: var(--matrix-green);
      font-family: 'Courier New', monospace;

      &::placeholder {
        color: rgba(0,255,65,0.5);
      }
    }

    &:focus-within {
      background: rgba(0,255,65,0.1);
      box-shadow: 0 0 10px rgba(0,255,65,0.5);
    }
  }

  .mat-mdc-button {
    background: transparent;
    border: 1px solid var(--matrix-green);
    color: var(--matrix-green);
    font-family: 'Courier New', monospace;
    text-transform: uppercase;
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(0,255,65,0.2), transparent);
      transition: left 0.5s;
    }

    &:hover {
      background: rgba(0,255,65,0.1);
      box-shadow: 0 0 15px rgba(0,255,65,0.5);
    }

    &:hover::before {
      left: 100%;
    }
  }

  .mat-mdc-card {
    background: rgba(0,0,0,0.8);
    border: 1px solid var(--matrix-green);
    box-shadow: 0 0 20px rgba(0,255,65,0.2);
    position: relative;

    &::before {
      content: '';
      position: absolute;
      top: -1px;
      left: -1px;
      right: -1px;
      bottom: -1px;
      background: linear-gradient(45deg, var(--matrix-green), transparent);
      z-index: -1;
      opacity: 0.3;
      animation: matrix-border-glow 2s ease-in-out infinite alternate;
    }
  }

  @keyframes matrix-border-glow {
    0% { opacity: 0.1; }
    100% { opacity: 0.4; }
  }

  // Matrix 字符效果
  @keyframes matrix-char {
    0% { text-shadow: 0 0 2px var(--matrix-green); }
    50% { text-shadow: 0 0 8px var(--matrix-green), 0 0 12px var(--matrix-green); }
    100% { text-shadow: 0 0 2px var(--matrix-green); }
  }

  .toolbar__title:hover {
    animation: matrix-char 1s ease-in-out infinite;
  }

  // 滚动条样式
  ::-webkit-scrollbar {
    width: 8px;
  }

  ::-webkit-scrollbar-track {
    background: var(--matrix-darker);
  }

  ::-webkit-scrollbar-thumb {
    background: var(--matrix-green);
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: rgba(0,255,65,0.8);
  }
}